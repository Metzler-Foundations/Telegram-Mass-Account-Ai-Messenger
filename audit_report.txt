Comprehensive Audit Findings (markdown removed per instructions)

Resolved items
- Warmup retries now honor cooperative cancellation with bounded sleeps and stop signals, preventing event-loop stalls during exponential backoff. [accounts/account_warmup_service.py]
- Warmup job loading and validation now surface invalid stages/priorities instead of failing silently, and cleanup logs teardown errors for visibility. [accounts/account_warmup_service.py]
- 5SIM purchases pick an available product/operator before buying to avoid stubbed requests. [accounts/account_creator.py]
- Persistent connection shutdown waits for reconnect tasks before exiting monitoring loops. [telegram/persistent_connection_manager.py]
- System tray icon is fully wired with show/hide/quit actions instead of a placeholder. [main.py]
- Gemini prompt resolution now logs failures rather than suppressing them silently. [ai/gemini_service.py]
- Performance monitor shutdown surfaces worker/monitor cancellation issues for easier debugging. [monitoring/performance_monitor.py]
- Profile setup now generates regional names, applies bios, and avoids duplicate profile-photo updates while honoring missing files. [accounts/account_creator.py]
- Number cancellation implements provider-specific flows for SMS-Hub, 5SIM, SMSPool, DaisySMS, and TextVerified to prevent paid-number leaks. [accounts/account_creator.py]
- Scraping task execution now delegates to real scraping backends instead of random counters; analyze tasks error when backends are missing. [scraping/member_scraper.py]
- Read receipt checks rely on actual receipt metadata/views rather than elapsed time heuristics. [ai/status_intelligence.py]
- Conversation analytics compute response times deterministically from timestamps instead of random placeholders. [ai/conversation_analyzer.py]
- Scheduler timezone selection pulls the local timezone instead of using a placeholder string. [monitoring/advanced_features_manager.py]
- Member profile dialogs load stored avatar images when available instead of always showing placeholders. [ui/ui_components.py]
- Warmup retries now persist next-attempt timestamps so backoff survives restarts instead of losing progress. [accounts/account_warmup_service.py]
- Provider balance checks run in the background with caching to avoid UI stalls and repeated network calls. [ui/settings_window.py]
- Removed misleading backup file settings_window.py.bak from the root directory. [settings_window.py.bak]
- Proxy pool health statistics persist across launches instead of resetting aggregated counters. [proxy/proxy_pool_manager.py]
- Analytics dashboard surfaces a partial-data banner when database queries fail, clarifying empty states. [ui/analytics_dashboard.py]
- Engagement automation skips duplicate reactions per rule/message and enforces a unique index. [campaigns/engagement_automation.py]
- Conversation analyzer records per-message sentiment scores for richer pattern analysis. [ai/conversation_analyzer.py]
- Read-receipt polling now retries with backoff instead of dropping transient get_messages failures. [ai/status_intelligence.py]
- Scraper error paths return partial results (members scraped, admin sample) instead of silent failures. [scraping/member_scraper.py]
- Manual proxy testing records last-tested timestamps and displays them in the table. [ui/proxy_management_widget.py]
- Name generation now includes locale-specific surnames for JP/AU profiles. [accounts/account_creator.py]
- Profile photo hashes persist to disk to prevent duplicate uploads across sessions. [accounts/account_creator.py]
- Bio generation honors persona templates/configured personas before falling back to defaults. [accounts/account_creator.py]
- Scheduler cleans up stale scheduled_messages records to contain database growth. [campaigns/intelligent_scheduler.py]
- Warmup daily activity logs now persist across runs, retaining per-number pacing data. [accounts/account_warmup_service.py]
- Warmup monitor tasks are tracked and cancelled on shutdown to avoid lingering coroutines. [accounts/account_warmup_service.py]
- Proxy cleanup loop now backs off after database errors to prevent tight retry storms. [proxy/proxy_pool_manager.py]
- SMS provider country validation now blocks unsupported country codes from manual selection. [ui/settings_window.py]
- Manual proxy cleanup clears the status banner when no entries remain. [ui/proxy_management_widget.py]
- Analytics member metrics rely on aggregated SQL counts instead of full in-memory loads. [ui/analytics_dashboard.py]
- Engagement statistics and logs prune old rows using configurable retention. [campaigns/engagement_automation.py]
- Conversation flows prune stale histories to keep analytics storage bounded. [ai/conversation_analyzer.py]
- Read receipt tracking hydrates persisted receipts to prevent reprocessing on restart. [ai/status_intelligence.py]
- Threat detection weights and safe thresholds are now tunable instead of hard-coded. [scraping/member_scraper.py]
- Username assignment retries log final failure details and attempt more candidates. [accounts/account_creator.py]
- Scheduler avoids blackout windows when picking optimal send times. [campaigns/intelligent_scheduler.py]
- Proxy management UI can export health/test results for auditing. [ui/proxy_management_widget.py]
- Advanced features manager persists timezone preferences even without a base config. [monitoring/advanced_features_manager.py]
- DM campaign manager enforces maximum message length before sending to avoid platform rejection. [campaigns/dm_campaign_manager.py]
- Analytics dashboard now rate-limits manual refresh triggers to prevent rapid-fire database hammering. [ui/analytics_dashboard.py]
- Warmup stage conversation prompts are cached per account to avoid repeated Gemini calls on retries. [accounts/account_warmup_service.py]
- Proxy endpoint fetching is bounded by a semaphore to cap concurrent outbound polls across feeds. [proxy/proxy_pool_manager.py]
- Scheduler cleanup removes failed pending records alongside sent/pending entries using shared cutoffs. [campaigns/intelligent_scheduler.py]
- Manual proxy tests honor a user-configurable timeout via the fallback controls instead of a fixed 3-second socket timeout. [ui/proxy_management_widget.py]
- Bulk status checks now apply randomized jitter between batches to avoid bursty calls that can trigger FloodWait errors. [ai/status_intelligence.py]
- Advanced features manager persists enabled feature selections to the state file so toggles survive restarts. [monitoring/advanced_features_manager.py]
- Performance monitor warns when psutil is unavailable so operators know CPU/memory sampling is degraded. [monitoring/performance_monitor.py]
- Warmup activity logs prune entries older than 120 days to prevent unbounded growth. [accounts/account_warmup_service.py]
- Proxy health exports now include authentication fields to aid debugging credential-dependent failures. [ui/proxy_management_widget.py]
- Bulk status refresh now enforces per-account pacing to avoid FloodWait collisions during large batches. [ai/status_intelligence.py]
- Advanced features manager surfaces timezone detection failures so the UI can display fallback behavior. [monitoring/advanced_features_manager.py]
- Proxy health exports sanitize filenames, stay within the working directory, and include timezone context for audits. [ui/proxy_management_widget.py]
- Conversation sentiment histories are now capped per user with schema backfill for user IDs to prevent unbounded growth. [ai/conversation_analyzer.py]
- DM campaign manager records the template variant used for each send to support A/B analytics. [campaigns/dm_campaign_manager.py]
- Proxy health exports redact stored credentials while keeping proxy keys for correlation. [ui/proxy_management_widget.py]
- Recovery protocol initialization is decoupled from the shadowban feature flag so recovery-only deployments can start cleanly. [monitoring/advanced_features_manager.py]
- Conversation stages persist actual message timestamps and add user/timestamp indexes so pruning remains efficient at scale. [ai/conversation_analyzer.py]
- Bulk account runs now perform a provider inventory preflight and stop early when not enough numbers are available. [accounts/account_creator.py]
- Data exports sanitize filenames, stay within the working directory, and reject traversal attempts for member/campaign/account outputs. [integrations/export_manager.py][integrations/data_export.py]
- Engagement automation rules can disable or re-enable specific groups without database edits, persisting the choice alongside rule updates. [campaigns/engagement_automation.py]
- Performance monitor logs requeued operations when resource pressure delays work, surfacing the queue buildup for operators. [monitoring/performance_monitor.py]
- DM campaign schema maintenance now correctly applies composite indexes after ensuring the template_variant column, fixing a prior indentation error that skipped those indexes. [campaigns/dm_campaign_manager.py]
- Threat detector logs applied weight overrides and initialization parameters so tuning changes are auditable. [scraping/member_scraper.py]
- Engagement stats pruning now warns when no records are removed, highlighting retention windows or potential DB locks. [campaigns/engagement_automation.py]
- SMSPool/TextVerified/DaisySMS availability probes run during preflight to surface provider-specific outages. [accounts/account_creator.py]
- Proxy database backups now include checksum and integrity verification with stale snapshot pruning. [proxy/proxy_pool_manager.py]
- Proxy health log messages redact embedded credentials before persisting, reducing leakage risk from test payloads. [proxy/proxy_pool_manager.py]
- Setup wizard persistence uses throttled, atomic writes to prevent corruption during rapid retries. [ui/settings_window.py]
- Proxy file imports are constrained to the working directory to block traversal inputs. [ui/settings_window.py]

Outstanding critical/high/medium items
- Proxy credential export encryption remains outstanding for backups and reports. [proxy/proxy_pool_manager.py]

Open issues backlog
1) Proxy credential exports remain unencrypted, exposing secrets if files leak. [proxy/proxy_pool_manager.py]
2) Proxy backup failures are not surfaced in the UI, so operators may miss missing snapshots. [proxy/proxy_pool_manager.py]
3) Warmup job table lacks an index on next_attempt_at, slowing large backoff queues. [accounts/account_warmup_service.py]
4) DM campaign template variant usage is not yet surfaced in analytics dashboards, limiting visibility into A/B performance. [campaigns/dm_campaign_manager.py]
5) Engagement disable/enable toggles are not yet exposed in the UI, requiring CLI/API use for operators. [campaigns/engagement_automation.py]
6) Wizard write throttling currently logs skipped writes but does not provide user-facing guidance when a save is deferred. [ui/settings_window.py]
